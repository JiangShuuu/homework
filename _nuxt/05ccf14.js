(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{353:function(t,e,n){var content=n(356);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(63).default)("25106f30",content,!0,{sourceMap:!1})},355:function(t,e,n){"use strict";n(353)},356:function(t,e,n){var o=n(62)((function(i){return i[1]}));o.push([t.i,"/*purgecss start ignore*/\n.cantstyle[data-v-418a5a6a]{\n  background-color:grey;\n  color:#fff\n}\n.active[data-v-418a5a6a]{\n  background-color:#00f;\n  color:#fff\n}\n\n/*purgecss end ignore*/",""]),o.locals={},t.exports=o},366:function(t,e,n){"use strict";n.r(e);n(358),n(246),n(50),n(359),n(20),n(78),n(77),n(360);var o=n(361),r=n.n(o),c=(n(362),n(363),{name:"AudioPlayer",components:{"vue-slider":r.a},data:function(){var t=this;return{currentMusic:{id:"",title:"",url:"",image:""},musicList:[{id:"1",title:"歌曲一",url:"https://static.dazedbear.pro/2018-ithome/Swing_Theory.mp3",image:"https://images.unsplash.com/photo-1647504275162-3117c4f0cea5?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80"},{id:"2",title:"歌曲二",url:"https://static.dazedbear.pro/2018-ithome/Sinking_Ship.mp3",image:"https://images.unsplash.com/photo-1640622841908-3a691b7b7ac9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1188&q=80"},{id:"3",title:"歌曲三",url:"https://static.dazedbear.pro/2018-ithome/It_s_All_Happening.mp3",image:"https://images.unsplash.com/photo-1647462522463-bc83fd437617?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{id:"4",title:"歌曲四",url:"NoMusieTest",image:"https://images.unsplash.com/photo-1647470570244-4c46e63384f1?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"}],audio:{duration:0,playbackRate:1},audioVolume:100,musicIndex:0,procss:0,bufferState:0,cantplay:!1,rate:0,log:{active:!1,id:"",name:"",start:0,end:0,diff:0,ts:0,te:0},buffer:function(e){return[[e[0],t.bufferState,{backgroundColor:"pink"}],[0,e[0],{backgroundColor:"blue"}]]}}},head:function(){return{title:this.currentMusic.title,meta:[{hid:"playerPage",name:"playerPage",content:"這是播放器頁面"}]}},created:function(){this.currentMusic=this.musicList[0]},mounted:function(){this.audio=this.$refs.audio,this.state(),this.mediaMeta(),window.addEventListener("beforeunload",this.endCount)},destroyed:function(){window.removeEventListener("beforeunload",this.endCount)},methods:{state:function(){var t=this;this.audio.ontimeupdate=function(){t.audioInfo(),t.procssBarUpdate()},this.audio.oncanplay=function(){t.cantplay=!1,t.mediaMeta()},this.audio.onvolumechange=function(){t.audio.muted&&(t.audioVolume=0),t.audio.muted||(t.audioVolume=t.audio.volume)},this.audio.onprogress=function(){if(!Number.isNaN(t.audio.duration)){var e=t.audio.buffered.end(t.audio.buffered.length-1);t.bufferState=Math.ceil(e/t.audio.duration*100)}},this.audio.onplaying=function(){t.startCount()},this.audio.onpause=function(){t.endCount()},this.audio.onseeked=function(){console.log("onseek停止計"),t.endCount()},this.audio.onseeking=function(){console.log("seeking開始計"),t.startCount()},this.audio.onended=function(){t.nextMusic(),t.audio.play()},this.audio.onratechange=function(){t.audio.playbackRate=t.$refs.audio.playbackRate}},mediaMeta:function(){var t=this;"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:this.currentMusic.title,artist:"Nat King Cole",album:this.currentMusic.title,artwork:[{src:this.currentMusic.image,sizes:"512x512",type:"image/png"}]}),navigator.mediaSession.setActionHandler("play",(function(){t.player(),navigator.mediaSession.playbackState="playing"})),navigator.mediaSession.setActionHandler("pause",(function(){t.pause(),navigator.mediaSession.playbackState="paused"})),navigator.mediaSession.setActionHandler("stop",(function(){})),navigator.mediaSession.setActionHandler("seekbackward",(function(){t.backFifteen()})),navigator.mediaSession.setActionHandler("seekforward",(function(){t.fastFifteen()})),navigator.mediaSession.setActionHandler("seekto",(function(e){t.audio.currentTime=e.seekTime,t.updatePositionState()})),navigator.mediaSession.setActionHandler("previoustrack",(function(){t.prevMusic()})),navigator.mediaSession.setActionHandler("nexttrack",(function(){t.nextMusic()})))},startCount:function(){this.log.active=!0,this.log.id=this.currentMusic.id,this.log.name=this.currentMusic.title,this.log.ts=Date.now(),this.log.start=this.audio.currentTime,console.log("開始計",this.log)},endCount:function(){if(this.log.active){this.log.te=Date.now(),this.log.end=this.audio.currentTime;var t=this.log.end-this.log.start;this.log.diff+=t,this.log.diff<2||(console.log("停止計",this.log),console.log("相差",this.log.diff),this.log.diff=0,this.log.active=!1)}},updatePositionState:function(){"setPositionState"in navigator.mediaSession&&navigator.mediaSession.setPositionState({duration:this.audio.duration,playbackRate:this.audio.playbackRate,position:this.audio.currentTime})},currentTime:function(){var time=Math.floor(this.audio.currentTime),t=new Date(1e3*time).getMinutes(),e=new Date(1e3*time).getSeconds().toString().padStart(2,"0");return"".concat(t,":").concat(e)},durationTime:function(){var time=Math.floor(this.audio.duration);if(isNaN(time))return"0:00";var t=new Date(1e3*time).getMinutes(),e=new Date(1e3*time).getSeconds().toString().padStart(2,"0");return"".concat(t,":").concat(e)},changeVolume:function(){this.audio.volume=this.audioVolume},fastFifteen:function(){this.audio.currentTime+=15},backFifteen:function(){this.audio.currentTime-=15},muted:function(){this.audio.muted=!this.audio.muted},changeMusic:function(t){this.audio.pause(),this.procss=0,this.currentMusic=t,this.audio.load(),this.cantplay=!0},nextMusic:function(){this.audio.pause(),this.endCount(),this.procss=0,this.musicIndex++,this.musicIndex>this.musicList.length-1&&(this.musicIndex=0),this.currentMusic=this.musicList[this.musicIndex],this.audio.load(),this.cantplay=!0},prevMusic:function(){this.audio.pause(),this.endCount(),this.procss=0,this.musicIndex--,this.musicIndex<0&&(this.musicIndex=this.musicList.length-1),this.currentMusic=this.musicList[this.musicIndex],this.audio.load(),this.cantplay=!0},procssBarUpdate:function(){var t=this.audio.currentTime,e=this.audio.duration;if(Number.isFinite(e)){var n=t/e*100;this.procss=n}},procssBar:function(t){var e=this.audio.duration;this.audio.currentTime=t/100*e},audioInfo:function(){for(var t=this.audio,map=["error","src","currentSrc"," networkState","readyState","preload","buffered","played","seekable","seeking","currentTime","startTime","duration","paused","defaultPlaybackRate","playbackRate","ended","autoplay","loop","controls","volume","muted"],e="",i=0,n=map.length;i<n;i++)e+=map[i]+" : "+t[map[i]]+"<br>\n";document.getElementById("panel").innerHTML=e}}}),d=(n(355),n(49)),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("audio",{ref:"audio",staticStyle:{width:"800px"},attrs:{controls:""}},[n("source",{attrs:{src:t.currentMusic.url,type:"audio/mpeg"}}),t._v("\n    Your browser does not support the audio element.\n  ")]),t._v(" "),n("div",{staticClass:"mt-4"},[n("div",{staticClass:"flex"},[n("div",[n("button",{staticClass:"p-1 border-blue-700 border-2",class:{cantstyle:t.cantplay},attrs:{disabled:t.cantplay},on:{click:function(e){return t.audio.play()}}},[t._v("\n          播放\n        ")]),t._v(" "),n("button",{staticClass:"p-1 border-blue-700 border-2",class:{cantstyle:t.cantplay},attrs:{disabled:t.cantplay},on:{click:function(e){return t.audio.pause()}}},[t._v("\n          暫停\n        ")]),t._v(" "),n("button",{staticClass:"p-1 border-blue-700 border-2",class:{cantstyle:t.cantplay},attrs:{disabled:t.cantplay},on:{click:t.fastFifteen}},[t._v("\n          快進15s\n        ")]),t._v(" "),n("button",{staticClass:"p-1 border-blue-700 border-2",class:{cantstyle:t.cantplay},attrs:{disabled:t.cantplay},on:{click:t.backFifteen}},[t._v("\n          倒退15s\n        ")]),t._v(" "),n("button",{staticClass:"p-1 border-blue-700 border-2",on:{click:t.prevMusic}},[t._v("\n          上一首\n        ")]),t._v(" "),n("button",{staticClass:"p-1 border-blue-700 border-2",on:{click:t.nextMusic}},[t._v("\n          下一首\n        ")])]),t._v(" "),n("ul",{staticClass:"flex ml-4 items-center"},[n("p",[t._v("速度")]),t._v(" "),n("button",{staticClass:"p-1 ml-4 border-blue-700 border-2",class:{cantstyle:t.cantplay,active:.5===t.audio.playbackRate},attrs:{disabled:t.cantplay},on:{click:function(e){t.$refs.audio.playbackRate=.5}}},[t._v("\n          0.5\n        ")]),t._v(" "),n("button",{staticClass:"p-1 ml-2 border-blue-700 border-2",class:{cantstyle:t.cantplay,active:1===t.audio.playbackRate},attrs:{disabled:t.cantplay},on:{click:function(e){t.$refs.audio.playbackRate=1}}},[t._v("\n          1\n        ")]),t._v(" "),n("button",{staticClass:"p-1 ml-2 border-blue-700 border-2",class:{cantstyle:t.cantplay,active:2===t.audio.playbackRate},attrs:{disabled:t.cantplay},on:{click:function(e){t.$refs.audio.playbackRate=2}}},[t._v("\n          2\n        ")])])]),t._v(" "),n("ul",{staticClass:"my-4 flex"},t._l(t.musicList,(function(e){return n("li",{key:e.id,staticClass:"flex items-center p-2 mr-4 border-2"},[n("div",{staticClass:"w-20 h-20"},[n("img",{staticClass:"w-full h-full object-cover",attrs:{src:e.image,alt:""}})]),t._v(" "),n("p",{staticClass:"m-4"},[t._v("\n          "+t._s(e.title)+"\n        ")]),t._v(" "),n("button",{staticClass:"p-1 border-blue-700 border-2",on:{click:function(n){return t.changeMusic(e)}}},[t._v("\n          按我\n        ")])])})),0)]),t._v(" "),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.audioVolume,expression:"audioVolume"}],staticClass:"cursor-pointer",attrs:{id:"volume",type:"range",name:"volume",min:"0",max:"1",step:"0.01",disabled:t.cantplay},domProps:{value:t.audioVolume},on:{input:t.changeVolume,__r:function(e){t.audioVolume=e.target.value}}}),t._v(" "),n("label",{attrs:{for:"volume"}},[t._v("volume")]),t._v(" "),n("button",{staticClass:"p-1 border-blue-700 border-2",class:{cantstyle:t.cantplay},attrs:{disabled:t.cantplay},on:{click:t.muted}},[t._v("\n      靜音\n    ")])]),t._v(" "),n("div",[t._v(t._s(t.currentTime())+" / "+t._s(t.durationTime()))]),t._v(" "),n("vue-slider",{attrs:{process:t.buffer},on:{change:t.procssBar},model:{value:t.procss,callback:function(e){t.procss=e},expression:"procss"}}),t._v(" "),n("div",[t._v("歌曲："+t._s(t.log.name)+" / 相差："+t._s(t.log.diff)+" 秒")]),t._v(" "),n("div",{staticClass:"border-2 mt-2",attrs:{id:"panel"}})],1)}),[],!1,null,"418a5a6a",null);e.default=component.exports}}]);